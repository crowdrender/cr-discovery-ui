import isSet from"../../modules/IsSet.js";export default class FilterQueryGenerator{constructor(a){this.filter=a}setFilter(a){this.filter=a}getQuery(){let a={};return this.filter.filterByCredit&&(a=this.appendCreditFilter(a)),this.filter.filterByLastActive&&(a=this.appendActivityFilter(a)),this.filter.filterByEmail&&(a=this.appendEmailFilter(a)),a}appendCreditFilter(a){if(!isSet(this.filter.minCredit)&&!isSet(this.filter.maxCredit))return a;const b={};return isSet(this.filter.minCredit)&&(b.$gte=+this.filter.minCredit),isSet(this.filter.maxCredit)&&(b.$lte=+this.filter.maxCredit),Object.assign(Object.assign({},a),{credit:b})}appendActivityFilter(a){if(!isSet(this.filter.lastActiveStart)&&!isSet(this.filter.lastActiveEnd))return a;const b={};return isSet(this.filter.lastActiveStart)&&(b.$gte={$date:new Date(this.filter.lastActiveStart).getTime()}),isSet(this.filter.lastActiveEnd)&&(b.$lte={$date:new Date(this.filter.lastActiveEnd).getTime()}),Object.assign(Object.assign({},a),{"activity.web":b})}appendEmailFilter(a){const b={};return this.filter.emailList&&(b.$in=this.filter.emailList),Object.assign(Object.assign({},a),{email:b})}}